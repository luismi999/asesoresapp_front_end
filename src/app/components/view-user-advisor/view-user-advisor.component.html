<!-- Loading  -->
<app-loading *ngIf="flag_loading"></app-loading>

<!-- Nuevo modal de confirmación de actualización de asesoría (restructured) -->
<p-dialog asesoría="Usuario" [(visible)]="flag" [modal]="true"  [style]="{ width: '70vw' }" [breakpoints]="{'960px': '75vw', '640px': '95vw'}" [draggable]="false" (onHide)="closeModal()">

    <!-- Linea horizontal  -->
    <div class="row">
        <div class="col">
            <hr>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <app-rank></app-rank>
        </div>
    </div>

    <!-- Detalles -->
    <div class="row">
        <div class="col-12 col-md-4 col-lg-4">
            <!-- Card  -->
            <div class="card shadow h-100">
                <!-- Card header  -->
                <div class="card-header bg-color-principal">
                    <h6 class="text-center text-light">Datos</h6>
                </div>
                <!-- Card body  -->
                <div class="card-body">

                    <!-- Detalles -->
                    <div class="row">
                        <div class="col">

                            <ul class="list-group">
                                <!-- Código institucional -->
                                <li class="list-group-item list-group-item-action">
                                    <h6 class="text-muted">Código</h6>
                                    <h6 *ngIf="user_who_wants_to_see?.role == 'admin'" class="my-0">
                                        <!-- Icono de credencial  -->
                                        <span class="text-primary">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-id-badge" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M5 3m0 3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-8a3 3 0 0 1 -3 -3z"></path>
                                                <path d="M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                                <path d="M10 6h4"></path>
                                                <path d="M9 18h6"></path>
                                            </svg>
                                        </span>
                                        {{user?.institutional_code}}  
                                    </h6>
                                    <h6 *ngIf="user_who_wants_to_see?.role != 'admin'" class="my-0">
                                        <!-- Icono de credencial  -->
                                        <span class="text-primary">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-id-badge" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M5 3m0 3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-8a3 3 0 0 1 -3 -3z"></path>
                                                <path d="M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"></path>
                                                <path d="M10 6h4"></path>
                                                <path d="M9 18h6"></path>
                                            </svg>
                                        </span>
                                        *********
                                    </h6>
                                </li>
                                <!-- Nombre del asesorado -->
                                <li class="list-group-item list-group-item-action">
                                    <h6 class="text-muted my-0">Nombre del usuario</h6>
                                    <h6 class="my-0">
                                        <!-- Icono de usuario  -->
                                        <span class="text-success">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0"></path>
                                                <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"></path>
                                            </svg>
                                        </span>
                                        {{user?.first_name | titlecase}} {{user?.last_name | titlecase}}
                                    </h6>
                                </li>
                                <!-- Correo institucional -->
                                <li class="list-group-item list-group-item-action">
                                    <h6 class="text-muted my-0">Correo institucional</h6>
                                    <h6 class="my-0">
                                        <!-- Icono de email  -->
                                        <span class="text-success">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z"></path>
                                                <path d="M3 7l9 6l9 -6"></path>
                                            </svg>
                                        </span>
                                        {{user?.institutional_email | titlecase}}
                                    </h6>
                                </li>
                                <!-- Teléfono -->
                                <li class="list-group-item list-group-item-action">
                                    <h6 class="text-muted my-0">Teléfono</h6>
                                    <h6 *ngIf="user_who_wants_to_see?.role == 'admin'" class="my-0">
                                        <!-- Icono de teléfono  -->
                                        <span class="text-primary">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-phone" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"></path>
                                            </svg>
                                        </span>
                                        {{user?.cellphone_number}}
                                    </h6>
                                    <h6 *ngIf="user_who_wants_to_see?.role != 'admin'" class="my-0">
                                        <!-- Icono de teléfono  -->
                                        <span class="text-primary">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-phone" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2"></path>
                                            </svg>
                                        </span>
                                        **********
                                    </h6>
                                </li>
                                <!-- Rol -->
                                <li class="list-group-item list-group-item-action">
                                    <h6 class="text-muted my-0">Role</h6>
                                    <h6 class="my-0">
                                        <!-- Icono de role  -->
                                        <span class="text-success">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-circle" width="20" height="20" viewBox="0 0 30 30" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                                <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0"></path>
                                                <path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0"></path>
                                                <path d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855"></path>
                                            </svg>
                                        </span>
                                        {{user?.role}}
                                    </h6>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gráfica de asesor sobre los joins asignados en cada mes  -->
        <div class="col-12 col-md-8 col-lg-8 mt-3 mt-md-0 mt-lg-0">
            <div class="row">
                <div class="col">
                    <app-chart-advisor></app-chart-advisor>
                </div>
            </div>
        </div>
    </div>

    <!-- Linea horizontal  -->
    <div class="row">
        <div class="col">
            <hr>
        </div>
    </div>
    
</p-dialog>